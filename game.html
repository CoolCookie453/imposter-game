<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Odd One Out</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }

```
    body {
        background: #1a1a1a;
        min-height: 100vh;
        overflow-x: hidden;
    }
    
    .card {
        background: #2a2a2a;
        border-radius: 24px;
        animation: slideUp 0.4s ease-out;
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .counter-btn {
        width: clamp(56px, 15vw, 64px);
        height: clamp(56px, 15vw, 64px);
        border-radius: 50%;
        border: 3px solid white;
        background: transparent;
        color: white;
        font-size: clamp(24px, 6vw, 32px);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .counter-btn:hover {
        transform: scale(1.05);
        background: rgba(255, 255, 255, 0.05);
    }
    
    .counter-btn:active {
        transform: scale(0.95);
        background: rgba(255, 255, 255, 0.1);
    }
    
    .start-btn {
        background: white;
        color: #1a1a1a;
        border-radius: 16px;
        padding: clamp(16px, 4vw, 20px);
        font-size: clamp(16px, 4vw, 20px);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .start-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(255, 255, 255, 0.2);
    }
    
    .start-btn:active {
        transform: translateY(0);
        background: #e0e0e0;
    }
    
    .secondary-btn {
        background: #2a2a2a;
        color: white;
        border-radius: 16px;
        padding: 16px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid #3a3a3a;
    }
    
    .secondary-btn:hover {
        background: #3a3a3a;
        transform: translateY(-2px);
    }
    
    .secondary-btn:active {
        transform: translateY(0);
    }
    
    .category-btn {
        background: #3a3a3a;
        border-radius: 12px;
        padding: clamp(10px, 3vw, 12px) clamp(16px, 4vw, 20px);
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        font-size: clamp(12px, 3.5vw, 16px);
    }
    
    .category-btn:hover {
        background: #4a4a4a;
        transform: translateY(-2px);
    }
    
    .category-btn.active {
        background: #4a4a4a;
        border-color: #666;
        transform: scale(1.05);
    }
    
    .category-btn:active {
        transform: scale(0.98);
    }
    
    .progress-bar {
        transition: width 0.5s ease;
        background: white;
    }
    
    .player-input {
        background: #3a3a3a;
        border: 2px solid #4a4a4a;
        border-radius: 12px;
        padding: 12px 16px;
        color: white;
        font-size: clamp(14px, 4vw, 16px);
        width: 100%;
        transition: all 0.2s;
    }
    
    .player-input:focus {
        outline: none;
        border-color: #666;
        transform: translateY(-2px);
    }
    
    .player-input::placeholder {
        color: #666;
    }
    
    /* Fade in animations for screens */
    .screen-enter {
        animation: fadeInSlide 0.4s ease-out;
    }
    
    @keyframes fadeInSlide {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Button ripple effect */
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    /* Loading Animation */
    #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1a1a1a;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        animation: fadeOut 0.5s ease-out 2.5s forwards;
    }
    
    @keyframes fadeOut {
        to {
            opacity: 0;
            pointer-events: none;
        }
    }
    
    .logo-container {
        position: relative;
        animation: scaleIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    @keyframes scaleIn {
        from {
            transform: scale(0) rotate(-180deg);
            opacity: 0;
        }
        to {
            transform: scale(1) rotate(0deg);
            opacity: 1;
        }
    }
    
    .logo-emoji {
        font-size: clamp(80px, 20vw, 120px);
        line-height: 1;
        animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
    }
    
    .logo-title {
        font-size: clamp(32px, 10vw, 48px);
        font-weight: bold;
        margin-top: 20px;
        background: linear-gradient(45deg, #ffffff, #888888, #ffffff);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: shimmer 2s ease-in-out infinite, slideUpTitle 0.8s ease-out 0.3s backwards;
    }
    
    @keyframes shimmer {
        0%, 100% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
    }
    
    @keyframes slideUpTitle {
        from {
            transform: translateY(30px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
    
    .loading-dots {
        display: flex;
        gap: 8px;
        margin-top: 30px;
        animation: slideUpTitle 0.8s ease-out 0.5s backwards;
    }
    
    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: white;
        animation: bounce 1.4s ease-in-out infinite;
    }
    
    .dot:nth-child(1) {
        animation-delay: 0s;
    }
    
    .dot:nth-child(2) {
        animation-delay: 0.2s;
    }
    
    .dot:nth-child(3) {
        animation-delay: 0.4s;
    }
    
    @keyframes bounce {
        0%, 80%, 100% {
            transform: translateY(0);
            opacity: 0.5;
        }
        40% {
            transform: translateY(-20px);
            opacity: 1;
        }
    }
    
    /* Fade in content */
    #mainContent {
        animation: fadeIn 0.5s ease-in 2.5s backwards;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Word reveal animation */
    .word-reveal {
        animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    @keyframes popIn {
        from {
            transform: scale(0.5);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }
    
    /* Back button hover */
    .back-btn {
        transition: all 0.3s ease;
    }
    
    .back-btn:hover {
        transform: scale(1.1);
        background: #3a3a3a !important;
    }
    
    .back-btn:active {
        transform: scale(0.95);
    }
</style>
```

</head>
<body class="text-white p-6">
    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="logo-container">
            <div class="logo-emoji">üé≠</div>
        </div>
        <div class="logo-title">Odd One Out</div>
        <div class="loading-dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>

```
<!-- Main Content -->
<div id="mainContent" class="max-w-2xl mx-auto">
    <!-- Setup Screen -->
    <div id="setupScreen">
        <!-- Title -->
        <div class="mb-8 mt-6">
            <h1 class="text-4xl font-bold mb-2">Game Settings</h1>
            <p class="text-gray-400 text-lg" id="categoryDisplay">Animals</p>
        </div>

        <!-- Category Selection -->
        <div class="mb-6">
            <label class="block text-gray-400 text-sm mb-3">Word Category</label>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                <button class="category-btn active" onclick="selectCategory('Animals', this)">Animals</button>
                <button class="category-btn" onclick="selectCategory('Objects', this)">Objects</button>
                <button class="category-btn" onclick="selectCategory('Places', this)">Places</button>
                <button class="category-btn" onclick="selectCategory('Nature', this)">Nature</button>
                <button class="category-btn" onclick="selectCategory('Fantasy', this)">Fantasy</button>
                <button class="category-btn" onclick="selectCategory('Restaurants', this)">Restaurants</button>
                <button class="category-btn" onclick="selectCategory('Video Games', this)">Video Games</button>
                <button class="category-btn" onclick="selectCategory('Rivals', this)">Rivals</button>
                <button class="category-btn bg-purple-600 border-purple-500" onclick="selectCategory('Custom', this)">‚úèÔ∏è Custom</button>
            </div>
            
            <!-- Custom Words Section -->
            <div id="customWordsSection" class="hidden mt-4 card p-4 screen-enter">
                <label class="block text-white text-sm font-semibold mb-2">‚úèÔ∏è Create Your Custom Words</label>
                <p class="text-gray-400 text-xs mb-3">Enter words separated by commas (e.g., Apple, Banana, Orange)</p>
                <textarea 
                    id="customWordsInput" 
                    class="player-input min-h-[120px] resize-none"
                    placeholder="Type your words here separated by commas..."
                ></textarea>
                <div class="mt-2 flex items-center justify-between">
                    <div class="text-sm text-gray-400" id="customWordCount">0 words</div>
                    <button onclick="clearCustomWords()" class="text-xs text-gray-400 hover:text-white transition-colors">Clear All</button>
                </div>
            </div>
        </div>

        <!-- Players Card -->
        <div class="card p-6 mb-4">
            <h3 class="text-xl font-semibold mb-2">Players</h3>
            <p class="text-gray-400 text-sm mb-6">Number of players in the game</p>
            <div class="flex items-center justify-center gap-8 mb-6">
                <button class="counter-btn" onclick="changeValue('players', -1)">‚àí</button>
                <span class="text-5xl font-bold" id="playerCount">5</span>
                <button class="counter-btn" onclick="changeValue('players', 1)">+</button>
            </div>
            
            <!-- Custom Names Toggle -->
            <div class="border-t border-gray-700 pt-4">
                <button onclick="toggleCustomNames()" class="w-full text-left flex items-center justify-between text-gray-300 hover:text-white transition-colors">
                    <span>Custom Player Names</span>
                    <svg id="namesArrow" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                <div id="customNamesSection" class="hidden mt-4 space-y-3" style="max-height: 300px; overflow-y: auto;">
                    <!-- Player name inputs will be added here dynamically -->
                </div>
            </div>
        </div>

        <!-- Imposters Card -->
        <div class="card p-6 mb-6">
            <h3 class="text-xl font-semibold mb-2">Imposters</h3>
            <p class="text-gray-400 text-sm mb-6">Number of secret imposters in the game</p>
            <div class="flex items-center justify-center gap-8">
                <button class="counter-btn" onclick="changeValue('imposters', -1)">‚àí</button>
                <span class="text-5xl font-bold" id="imposterCount">1</span>
                <button class="counter-btn" onclick="changeValue('imposters', 1)">+</button>
            </div>
        </div>

        <!-- Start Button -->
        <button onclick="startGame()" class="start-btn w-full flex items-center justify-center gap-3">
            <span>Start Game</span>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"></path>
            </svg>
        </button>
        <div class="text-center text-gray-400 text-sm mt-3" id="startInfo"></div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="hidden">
        <!-- Back Button -->
        <button onclick="resetGame()" class="back-btn mb-6 w-14 h-14 rounded-full bg-[#2a2a2a] flex items-center justify-center">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </button>

        <!-- Progress -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm text-gray-400">Progress</span>
                <span class="text-sm font-medium" id="progressText">0 / 5</span>
            </div>
            <div class="w-full bg-[#2a2a2a] rounded-full h-1.5">
                <div class="progress-bar h-1.5 rounded-full" id="progressBar" style="width: 0%"></div>
            </div>
        </div>

        <!-- Player Card -->
        <div class="card p-8 min-h-[500px] flex flex-col justify-center mb-6">
            <div class="text-center mb-8">
                <div class="inline-block bg-[#3a3a3a] px-6 py-2 rounded-full mb-4">
                    <span class="text-gray-400 text-sm">Now Viewing</span>
                </div>
                <h2 class="text-5xl font-bold mb-3" id="playerNumber">Player 1</h2>
                <p class="text-gray-400" id="playerInstruction">Keep this screen private</p>
            </div>

            <div id="revealSection">
                <button onclick="revealWord()" class="start-btn w-full flex items-center justify-center gap-3">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                    </svg>
                    <span>Reveal Your Word</span>
                </button>
            </div>

            <div id="wordSection" class="hidden space-y-6">
                <div class="bg-[#3a3a3a] rounded-3xl p-6 min-h-[280px] flex items-center justify-center">
                    <div class="text-center w-full px-4 flex flex-col items-center justify-center">
                        <p class="text-gray-400 text-base mb-4">Your word is:</p>
                        <div id="normalWord" class="hidden flex items-center justify-center word-reveal">
                            <p class="font-bold break-words leading-tight text-center" id="displayWord" style="font-size: clamp(2rem, 12vw, 4rem);"></p>
                        </div>
                        <div id="imposterWord" class="hidden py-6 flex flex-col items-center justify-center word-reveal">
                            <div class="mb-5 leading-none text-center" style="font-size: clamp(3rem, 15vw, 6rem);">üé≠</div>
                            <p class="font-bold mb-5 px-2 text-center" id="imposterText" style="font-size: clamp(2rem, 10vw, 3.5rem); letter-spacing: 0.1em; word-spacing: 100vw;">IMPOSTER</p>
                            <p class="text-gray-400 text-lg mt-6 px-4 text-center">You don't know the word!</p>
                        </div>
                    </div>
                </div>
                <button onclick="nextPlayer()" class="w-full bg-[#2a2a2a] hover:bg-[#3a3a3a] text-white font-semibold py-5 px-6 rounded-2xl transition-all duration-200 flex items-center justify-center gap-3">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                    </svg>
                    <span>Next Player</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Discussion Screen -->
    <div id="discussionScreen" class="hidden">
        <!-- Back Button -->
        <button onclick="goHome()" class="mb-6 w-14 h-14 rounded-full bg-[#2a2a2a] flex items-center justify-center">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
        </button>

        <div class="card p-8 text-center mb-6">
            <div class="text-7xl mb-6">üí¨</div>
            <h2 class="text-4xl font-bold mb-4">Discussion Time!</h2>
            <p class="text-gray-400 text-lg mb-8">Time to discuss and find the imposter</p>
            
            <div class="bg-[#3a3a3a] rounded-2xl p-6 mb-8">
                <p class="text-sm text-gray-400 mb-2">Starting player:</p>
                <p class="text-4xl font-bold" id="startingPlayer">Player 3</p>
            </div>

            <button onclick="revealAnswer()" class="start-btn w-full flex items-center justify-center gap-3 mb-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
                <span>Reveal Answer</span>
            </button>
        </div>
    </div>

    <!-- Answer Screen -->
    <div id="answerScreen" class="hidden">
        <!-- Home Button -->
        <button onclick="goHome()" class="back-btn mb-6 w-14 h-14 rounded-full bg-[#2a2a2a] flex items-center justify-center">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
        </button>

        <div class="card p-8 text-center mb-6">
            <div class="text-7xl mb-6">üé≠</div>
            <h2 class="text-3xl font-bold mb-6">Game Results</h2>
            
            <div class="bg-[#3a3a3a] rounded-2xl p-6 mb-6">
                <p class="text-sm text-gray-400 mb-2">The secret word was:</p>
                <p class="text-4xl font-bold mb-6 break-words" id="secretWord"></p>
                
                <div class="border-t border-gray-600 pt-6">
                    <p class="text-sm text-gray-400 mb-3">The imposter(s) were:</p>
                    <div id="imposterList" class="space-y-2"></div>
                </div>
            </div>

            <button onclick="playAgain()" class="start-btn w-full flex items-center justify-center gap-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                <span>Play Again</span>
            </button>
        </div>
    </div>
</div>

<script>
    const wordSets = {
        'Animals': ['Lion', 'Elephant', 'Dolphin', 'Eagle', 'Penguin', 'Giraffe', 'Tiger', 'Panda', 'Koala', 'Zebra'],
        'Objects': ['Guitar', 'Camera', 'Laptop', 'Watch', 'Bicycle', 'Telescope', 'Compass', 'Backpack', 'Umbrella', 'Mirror'],
        'Places': ['Beach', 'Mountain', 'Desert', 'Forest', 'City', 'Island', 'Valley', 'Lake', 'Canyon', 'Jungle'],
        'Nature': ['Rainbow', 'Sunset', 'Ocean', 'Volcano', 'Thunder', 'Waterfall', 'Aurora', 'Eclipse', 'Meteor', 'Glacier'],
        'Fantasy': ['Dragon', 'Wizard', 'Castle', 'Phoenix', 'Unicorn', 'Mermaid', 'Griffin', 'Fairy', 'Knight', 'Sorcerer'],
        'Restaurants': [
            'McDonald\'s', 'Burger King', 'Wendy\'s', 'KFC', 'Popeyes', 'Chick-fil-A', 
            'Taco Bell', 'Chipotle', 'Subway', 'Arby\'s', 'Five Guys', 'In-N-Out', 
            'Shake Shack', 'White Castle', 'Jack in the Box', 'Carl\'s Jr', 'Hardee\'s',
            'Sonic', 'Whataburger', 'Culver\'s', 'Dairy Queen', 'Baskin-Robbins', 
            'Dunkin\'', 'Krispy Kreme', 'Starbucks', 'Tim Hortons', 'Panera Bread',
            'Pizza Hut', 'Domino\'s', 'Papa John\'s', 'Little Caesars', 'Papa Murphy\'s',
            'Olive Garden', 'Red Lobster', 'Applebee\'s', 'Chili\'s', 'TGI Friday\'s',
            'Outback', 'Texas Roadhouse', 'Buffalo Wild Wings', 'Hooters', 'Wingstop',
            'Denny\'s', 'IHOP', 'Waffle House', 'Cracker Barrel', 'Bob Evans',
            'Panda Express', 'P.F. Chang\'s', 'Benihana', 'Cheesecake Factory',
            'Red Robin', 'Longhorn Steakhouse', 'Golden Corral', 'Ryan\'s',
            'Maggiano\'s', 'Romano\'s Macaroni Grill', 'Buca di Beppo', 'Carrabba\'s'
        ],
        'Video Games': [
            'Minecraft', 'Fortnite', 'Roblox', 'Mario', 'Zelda', 'Pokemon', 'Sonic', 
            'Pac-Man', 'Tetris', 'Call of Duty', 'FIFA', 'NBA 2K', 'Madden', 
            'Grand Theft Auto', 'Red Dead', 'Apex Legends', 'Valorant', 'Overwatch', 
            'League of Legends', 'Dota', 'CS:GO', 'Rocket League', 'Fall Guys', 
            'Among Us', 'Wordle', 'Candy Crush', 'Clash of Clans', 'Brawl Stars', 
            'Genshin Impact', 'Honkai', 'Splatoon', 'Animal Crossing', 'Stardew Valley', 
            'Terraria', 'Halo', 'Doom', 'Resident Evil', 'Silent Hill', 'Dark Souls', 
            'Elden Ring', 'Bloodborne', 'Sekiro', 'God of War', 'Spider-Man', 
            'Batman Arkham', 'Assassins Creed', 'Far Cry', 'Watch Dogs', 'Cyberpunk', 
            'Witcher', 'Skyrim', 'Fallout', 'Bioshock', 'Portal', 'Half-Life', 
            'Team Fortress', 'Left 4 Dead', 'Payday', 'Borderlands', 'Destiny', 
            'Warframe', 'Diablo', 'Path of Exile', 'Monster Hunter', 'Final Fantasy', 
            'Kingdom Hearts', 'Persona', 'Undertale', 'Deltarune', 'Hollow Knight', 
            'Celeste', 'Dead Cells', 'Hades', 'Cuphead', 'Shovel Knight', 'Ori'
        ],
        'Rivals': [
            'Distortion', 'Permafrost', 'Energy rifle', 'Flamethrower', 'Grenade launcher', 
            'Mini gun', 'Paintball gun', 'Assault rifle', 'Bow', 'Burst rifle', 'Crossbow', 
            'Gun blade', 'RPG', 'Shotgun', 'Sniper', 'Warper', 'Energy pistols', 'EXO gun', 
            'Slingshot', 'Daggers', 'Flare gun', 'Hand gun', 'Revolver', 'Shorty', 'Spray', 
            'Uzi', 'Maul', 'Battle axe', 'Chainsaw', 'Trowel', 'Fist', 'Katana', 'Knife', 
            'Riot shield', 'Scythe', 'Med kit', 'Sub space', 'Tripmine', 'Warp stone', 
            'Flash bang', 'Freeze ray', 'Grenade', 'Jump pad', 'Molotov', 'Satchel', 
            'Smoke grenade', 'War horn', 'Construction', 'Big Arena', 'Arena', 'Crossroads', 
            'Bridge', 'Big crossroad', 'Shooting range', 'Docks', 'Station', 'Big back rooms', 
            'Back rooms', 'Random', 'Splash', 'Graveyard', 'Big graveyard', 'Big splash', 
            'Battleground', 'Onyx', 'Keys', 'Win rate', 'Ranked', 'Gold', 'Bronze', 'Silver', 
            'Diamond', 'Platinum', 'Nemesis', 'Archenemies', 'Mobile', 'PC', 'Controller', 
            'Skin case', 'Wrap box', 'Finisher pack'
        ],
        'Custom': []
    };

    let usedWords = {};
    let customWords = [];

    let numPlayers = 5;
    let numImposters = 1;
    let currentPlayer = 0;
    let imposterIndexes = [];
    let previousImposterIndexes = [];
    let selectedWord = '';
    let previousWord = '';
    let revealedCount = 0;
    let currentCategory = 'Animals';
    let startingPlayerIndex = 0;
    let playerNames = [];
    let customNamesExpanded = false;

    function selectCategory(category, btn) {
        currentCategory = category;
        
        // Reset used words when changing category
        if (!usedWords[category]) {
            usedWords[category] = [];
        }
        
        // Show/hide custom words section
        if (category === 'Custom') {
            document.getElementById('customWordsSection').classList.remove('hidden');
            updateCustomWordCount();
        } else {
            document.getElementById('customWordsSection').classList.add('hidden');
        }
        
        document.getElementById('categoryDisplay').textContent = category;
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        updateStartInfo();
    }

    function updateCustomWordCount() {
        const input = document.getElementById('customWordsInput');
        const words = input.value
            .split(',')
            .map(w => w.trim())
            .filter(w => w.length > 0);
        
        customWords = words;
        wordSets['Custom'] = words;
        
        const countEl = document.getElementById('customWordCount');
        if (words.length === 0) {
            countEl.textContent = '0 words - Add some words to get started!';
            countEl.classList.add('text-yellow-400');
        } else {
            countEl.textContent = `${words.length} word${words.length !== 1 ? 's' : ''} ready!`;
            countEl.classList.remove('text-yellow-400');
            countEl.classList.add('text-green-400');
        }
    }

    function clearCustomWords() {
        document.getElementById('customWordsInput').value = '';
        updateCustomWordCount();
    }

    // Add event listener for custom words input
    document.addEventListener('DOMContentLoaded', function() {
        const customInput = document.getElementById('customWordsInput');
        if (customInput) {
            customInput.addEventListener('input', updateCustomWordCount);
        }
    });

    function changeValue(type, delta) {
        if (type === 'players') {
            numPlayers = Math.max(3, Math.min(10, numPlayers + delta));
            document.getElementById('playerCount').textContent = numPlayers;
            numImposters = Math.min(numImposters, Math.floor(numPlayers / 2));
            document.getElementById('imposterCount').textContent = numImposters;
            updatePlayerNameInputs();
        } else {
            numImposters = Math.max(1, Math.min(Math.floor(numPlayers / 2), numImposters + delta));
            document.getElementById('imposterCount').textContent = numImposters;
        }
        updateStartInfo();
    }

    function toggleCustomNames() {
        customNamesExpanded = !customNamesExpanded;
        const section = document.getElementById('customNamesSection');
        const arrow = document.getElementById('namesArrow');
        
        if (customNamesExpanded) {
            section.classList.remove('hidden');
            arrow.style.transform = 'rotate(180deg)';
            updatePlayerNameInputs();
        } else {
            section.classList.add('hidden');
            arrow.style.transform = 'rotate(0deg)';
        }
    }

    function updatePlayerNameInputs() {
        if (!customNamesExpanded) return;
        
        const section = document.getElementById('customNamesSection');
        section.innerHTML = '';
        
        for (let i = 0; i < numPlayers; i++) {
            const div = document.createElement('div');
            div.innerHTML = `
                <input 
                    type="text" 
                    class="player-input" 
                    placeholder="Player ${i + 1}" 
                    value="${playerNames[i] || ''}"
                    onchange="updatePlayerName(${i}, this.value)"
                >
            `;
            section.appendChild(div);
        }
    }

    function updatePlayerName(index, name) {
        playerNames[index] = name.trim();
    }

    function getPlayerName(index) {
        return playerNames[index] || `Player ${index + 1}`;
    }

    function updateStartInfo() {
        document.getElementById('startInfo').textContent = 
            `${numPlayers} players ‚Ä¢ ${numImposters} imposter${numImposters > 1 ? 's' : ''}`;
    }

    function startGame() {
        // Check if Custom category has words
        if (currentCategory === 'Custom' && customWords.length === 0) {
            alert('Please add at least one word to your custom list!');
            return;
        }
        
        // Initialize used words array for this category if it doesn't exist
        if (!usedWords[currentCategory]) {
            usedWords[currentCategory] = [];
        }
        
        const words = wordSets[currentCategory];
        
        // Check if category has words
        if (!words || words.length === 0) {
            alert('This category has no words. Please select a different category.');
            return;
        }
        
        // If all words have been used, reset the used words for this category
        if (usedWords[currentCategory].length >= words.length) {
            usedWords[currentCategory] = [];
        }
        
        // Get available words (not yet used AND not the previous word)
        let availableWords = words.filter(word => 
            !usedWords[currentCategory].includes(word) && word !== previousWord
        );
        
        // If no words available (edge case - only 1 word left and it was previous)
        if (availableWords.length === 0) {
            availableWords = words.filter(word => !usedWords[currentCategory].includes(word));
        }
        
        // If still no words (all used), reset and exclude previous word
        if (availableWords.length === 0) {
            usedWords[currentCategory] = [];
            availableWords = words.filter(word => word !== previousWord);
        }
        
        // Select a random word from available words
        selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
        
        // Add to used words and save as previous word
        usedWords[currentCategory].push(selectedWord);
        previousWord = selectedWord;
        
        // Select random imposters (different from previous game)
        imposterIndexes = [];
        let attempts = 0;
        const maxAttempts = 1000;
        
        // Get available players (not previous imposters)
        const availablePlayers = [];
        for (let i = 0; i < numPlayers; i++) {
            if (!previousImposterIndexes.includes(i)) {
                availablePlayers.push(i);
            }
        }
        
        // If we have enough available players, select from them
        if (availablePlayers.length >= numImposters) {
            while (imposterIndexes.length < numImposters) {
                const randomIdx = Math.floor(Math.random() * availablePlayers.length);
                const playerIdx = availablePlayers[randomIdx];
                
                if (!imposterIndexes.includes(playerIdx)) {
                    imposterIndexes.push(playerIdx);
                }
            }
        } else {
            // Edge case: not enough non-previous players (e.g., 3 players, 2 imposters)
            // In this case, ensure at least some different players
            const mustInclude = availablePlayers.slice();
            imposterIndexes = [...mustInclude];
            
            // Fill remaining slots with any players
            while (imposterIndexes.length < numImposters && attempts < maxAttempts) {
                const idx = Math.floor(Math.random() * numPlayers);
                if (!imposterIndexes.includes(idx)) {
                    imposterIndexes.push(idx);
                }
                attempts++;
            }
        }
        
        // Save current imposters for next game
        previousImposterIndexes = [...imposterIndexes];
        
        // Select random starting player (different from any imposter)
        do {
            startingPlayerIndex = Math.floor(Math.random() * numPlayers);
        } while (imposterIndexes.includes(startingPlayerIndex));
        
        currentPlayer = 0;
        revealedCount = 0;
        
        document.getElementById('setupScreen').classList.add('hidden');
        document.getElementById('gameScreen').classList.remove('hidden');
        updatePlayerDisplay();
    }

    function updatePlayerDisplay() {
        document.getElementById('playerNumber').textContent = getPlayerName(currentPlayer);
        document.getElementById('progressText').textContent = `${revealedCount} / ${numPlayers}`;
        document.getElementById('progressBar').style.width = `${(revealedCount / numPlayers) * 100}%`;
    }

    function revealWord() {
        document.getElementById('revealSection').classList.add('hidden');
        document.getElementById('wordSection').classList.remove('hidden');
        
        const isImposter = imposterIndexes.includes(currentPlayer);
        
        if (isImposter) {
            document.getElementById('normalWord').classList.add('hidden');
            document.getElementById('imposterWord').classList.remove('hidden');
        } else {
            document.getElementById('imposterWord').classList.add('hidden');
            document.getElementById('normalWord').classList.remove('hidden');
            document.getElementById('displayWord').textContent = selectedWord;
        }
        
        revealedCount++;
        updatePlayerDisplay();
    }

    function nextPlayer() {
        document.getElementById('wordSection').classList.add('hidden');
        document.getElementById('revealSection').classList.remove('hidden');
        
        if (currentPlayer < numPlayers - 1) {
            currentPlayer++;
            updatePlayerDisplay();
        } else {
            showDiscussionScreen();
        }
    }

    function showDiscussionScreen() {
        document.getElementById('gameScreen').classList.add('hidden');
        document.getElementById('discussionScreen').classList.remove('hidden');
        document.getElementById('startingPlayer').textContent = getPlayerName(startingPlayerIndex);
    }

    function revealAnswer() {
        document.getElementById('discussionScreen').classList.add('hidden');
        document.getElementById('answerScreen').classList.remove('hidden');
        document.getElementById('secretWord').textContent = selectedWord;
        
        const imposterListEl = document.getElementById('imposterList');
        imposterListEl.innerHTML = '';
        imposterIndexes.sort((a, b) => a - b).forEach(idx => {
            const div = document.createElement('div');
            div.className = 'text-2xl font-bold';
            div.textContent = getPlayerName(idx);
            imposterListEl.appendChild(div);
        });
    }

    function playAgain() {
        // Hide answer screen
        document.getElementById('answerScreen').classList.add('hidden');
        document.getElementById('revealSection').classList.remove('hidden');
        document.getElementById('wordSection').classList.add('hidden');
        
        // Automatically start a new game with same settings
        startGame();
    }

    function goHome() {
        resetGame();
    }

    function resetGame() {
        // Clear previous imposters when going back to setup
        previousImposterIndexes = [];
        // Reset used words when going back to home
        usedWords = {};
        // Reset previous word
        previousWord = '';
        
        document.getElementById('gameScreen').classList.add('hidden');
        document.getElementById('discussionScreen').classList.add('hidden');
        document.getElementById('answerScreen').classList.add('hidden');
        document.getElementById('setupScreen').classList.remove('hidden');
        document.getElementById('revealSection').classList.remove('hidden');
        document.getElementById('wordSection').classList.add('hidden');
    }

    updateStartInfo();
</script>
```

</body>
</html>
